<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>何分何秒君</title>
  <style>
    body { font-family: sans-serif; text-align: center; margin-top: 50px; }
    button { font-size: 1.5em; padding: 10px 20px; margin: 10px; }
    #question { font-size: 2em; margin: 20px; }
    input { font-size: 1.5em; padding: 5px; width: 100px; text-align: center; }
    #result { margin-top: 20px; font-size: 1.2em; font-weight: bold; }
  </style>
</head>
<body>

  <h1>何分何秒君</h1>
  <button onclick="generateRandomQuestion()">問題を出す</button>
  <div id="question"></div>
  <input type="text" id="answerInput" placeholder="答えを入力">
  <button onclick="checkAnswer()">こたえあわせ</button>
  <div id="result"></div>

  <script>
    let currentAnswer;
    let streak = 0;

    function generateRandomQuestion() {
      const type = Math.floor(Math.random() * 4);
      generateQuestion(type);
      document.getElementById('result').textContent = '';
      document.getElementById('answerInput').value = '';
      document.getElementById('answerInput').focus();
    }

    function generateQuestion(type) {
      let a, b, questionText;
      switch (type) {
        case 0: // 秒→分
          a = Math.floor(Math.random() * 4 + 1); // 分の部分
          b = Math.floor(Math.random() * 60); // 端数
          currentAnswer = ((60 * a) + b) / 60;
          questionText = `${60 * a + b}秒は何分？`;
          break;
        case 1: // 分→秒
          a = Math.floor(Math.random() * 4 + 1); // 分の部分
          b = Math.floor(Math.random() * 60); // 端数
          currentAnswer = 60 * a + b;
          questionText = b === 0 ? `${a}分は何秒？` : `${a}分${b}秒は何秒？`;
          break;
        case 2: // 分→時間
          a = Math.floor(Math.random() * 4 + 1); // 時の部分
          b = Math.floor(Math.random() * 60); // 端数
          currentAnswer = ((60 * a) + b) / 60;
          questionText = `${60 * a + b}分は何時間？`;
          break;
        case 3: // 時間→分
          a = Math.floor(Math.random() * 4 + 1); // 時間
          b = Math.floor(Math.random() * 60); // 端数
          currentAnswer = 60 * a + b;
          questionText = b === 0 ? `${a}時間は何分？` : `${a}時間${b}分は何分？`;
          break;
      }
      document.getElementById('question').textContent = questionText;
    }

    function checkAnswer() {
      const input = document.getElementById('answerInput').value.trim();
      const userAnswer = parseFloat(input);
      const isCorrect = !isNaN(userAnswer) && Math.abs(userAnswer - currentAnswer) < 0.01;
      const result = document.getElementById('result');

      if (isCorrect) {
        streak++;
        result.textContent = `正解！ 現在 ${streak} 問連続正解中！`;
      } else {
        result.textContent = `ちがうよ。正解は ${currentAnswer} だよ。`;
        streak = 0;
      }
    }
  </script>

</body>
</html>
