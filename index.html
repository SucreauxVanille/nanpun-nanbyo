<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>何分何秒君</title>
  <style>
    body { font-family: sans-serif; text-align: center; margin-top: 50px; }
    button { font-size: 1.5em; padding: 10px 20px; margin: 10px; }
    #question { font-size: 2em; margin: 20px; }
    input { font-size: 1.5em; padding: 5px; width: 100px; text-align: center; }
    #result { margin-top: 20px; font-size: 1.2em; font-weight: bold; }
  </style>
</head>
<body>

  <h1>何分何秒君</h1>
  <button id="generateBtn" onclick="generateRandomQuestion()">問題を出す</button>
  <div id="question"></div>
  <input type="text" id="answerInput" placeholder="答えを入力">
  <button onclick="checkAnswer()">こたえあわせ</button>
  <div id="result"></div>

  <script>
    let currentAnswer;
    let streak = 0;
    let questionCount = 0;
    const maxQuestions = 20;

    function generateRandomQuestion() {
      if (questionCount >= maxQuestions) {
        document.getElementById('question').textContent = 'おしまい！よくがんばったね！';
        document.getElementById('generateBtn').disabled = true;
        return;
      }

      const type = Math.floor(Math.random() * 4);
      generateQuestion(type);
      document.getElementById('result').textContent = '';
      document.getElementById('answerInput').value = '';
      document.getElementById('answerInput').focus();
      questionCount++;
    }

    function generateQuestion(type) {
      let a, b, questionText;

      switch (type) {
        case 0: // 秒→分（割り切れる秒）
          a = Math.floor(Math.random() * 10 + 1);
          currentAnswer = a;
          questionText = `${a * 60}秒は何分？`;
          break;

        case 1: // 分→秒（端数含む）
          a = Math.floor(Math.random() * 5 + 1); // 1〜5分
          b = Math.floor(Math.random() * 4) * 15; // 0,15,30,45秒 → 15秒単位
          currentAnswer = 60 * a + b;
          questionText = b === 0 ? `${a}分は何秒？` : `${a}分${b}秒は何秒？`;
          break;

        case 2: // 分→時間（割り切れる分）
          a = Math.floor(Math.random() * 5 + 1); // 時間に変換できる
          currentAnswer = a;
          questionText = `${a * 60}分は何時間？`;
          break;

        case 3: // 時間→分（端数含む）
          a = Math.floor(Math.random() * 3 + 1); // 1〜3時間
          b = Math.floor(Math.random() * 4) * 15; // 0,15,30,45分 → 15分単位
          currentAnswer = 60 * a + b;
          questionText = b === 0 ? `${a}時間は何分？` : `${a}時間${b}分は何分？`;
          break;
      }

      document.getElementById('question').textContent = `第${questionCount + 1}問： ${questionText}`;
    }

    function checkAnswer() {
      const input = document.getElementById('answerInput').value.trim();
      const userAnswer = parseInt(input, 10);
      const result = document.getElementById('result');

      if (userAnswer === currentAnswer) {
        streak++;
        result.textContent = `正解！ 現在 ${streak} 問連続正解中！`;
      } else {
        result.textContent = `ちがうよ。正解は ${currentAnswer} だよ。`;
        streak = 0;
      }
    }
  </script>

</body>
</html>
